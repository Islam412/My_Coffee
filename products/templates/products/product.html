{% extends "base.html" %}
{% load static %}
{% block title %}
  Product Details
{% endblock title %}
{% block body %}
    <div class="my-form container p-5 my-5 rounded border border-warning">
        <form id="frmaddtocart" action="{% url 'add_to_cart' %}">

            <h2 class="text-center">Product Details</h2>
            <hr>
            {% include "accounts/_alerts.html" %}
            <section>
                
                <div class="row p-5 " >
                    <div class="card mb-3 w-100" >
                    <div class="row no-gutters">
                        <div class="col-md-4">
                        <img src="{{product.image.url}}" class="card-img" alt="product">
                        </div>
                        <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title" id="productName">{{product.name}}</h5>
                            <hr>
                            <p class="card-text" id="description">{{product.description}}</p>
                            <hr>
                            <p class="card-text">Current Price: <span id="price" class="bg-dark text-light rounded-circle p-2">${{product.price}}</span></p>
                            <hr>
                            <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Add To Cart</button>



<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Select quantity</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <label for="inputUsername">Quantity: </label>
            <input type="text" class="form-control" name="quantity" id="inputquantity" value="1" placeholder="" required>
            <input type="hidden" name="product_id" value="{{product_id}}">
            <input type="hidden" name="price" value="{{product.price}}">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="'btnclose">Close</button>
          <button type="button" class="btn btn-warning" onclick="addtocart()">Confirm</button>
        </div>
      </div>
    </div>
  </div>




                            <a href="{% url 'product_favorite' product_id=product.id %}" type="submit" class="btn btn-warning">
                                <svg class="bi bi-star-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            </a>
                            <hr>
                            <a href="{% url 'products' %}" class="btn btn-warning">All Products</a>
                            <a href="{% url 'index' %}" class="btn btn-warning">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-heart" viewBox="0 0 16 16">
                                    <path d="M8 6.982C9.664 5.309 13.825 8.236 8 12 2.175 8.236 6.336 5.309 8 6.982Z"/>
                                    <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.707L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.646a.5.5 0 0 0 .708-.707L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z"/>
                                  </svg>
                            </a>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
            </section>
        </form>

        <script>
            function addtocart(){
                document.getElementById('btnclose').click();
                t = setTimeout(function(){},5000)
                clearTimeout(t);
                document.getElementById('frmaddtocart').submit();
            }
        </script>
    </div>
{% endblock body %}
